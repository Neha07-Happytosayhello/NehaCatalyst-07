<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop ReBorn Fashion+</title>
    <link rel="shortcut icon" href="assets/Favicon.jpg">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* Shop Controls */
        .shop-controls {
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .search-box {
            flex: 1;
            min-width: 250px;
        }
        
        .search-box input {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .search-box input:focus {
            outline: none;
            border-color: #007bff;
        }
        
        .filter-dropdown {
            padding: 10px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            cursor: pointer;
        }
        
        .filter-dropdown:focus {
            outline: none;
            border-color: #007bff;
        }
        
        .product-count {
            color: #666;
            font-size: 14px;
        }
        
        /* Product Grid Enhancements */
        .product-card {
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .product-card .card-button {
            transition: all 0.3s ease;
        }
        
        .product-card .card-button:hover {
            transform: scale(1.05);
        }
        
        .product-card .card-button.added {
            background: #28a745;
        }
        
        .product-card .card-button.added:hover {
            background: #218838;
        }
        
        /* Cart Badge */
        .cart-count {
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            margin-left: 5px;
        }
        
        /* Auth Button */
        .auth-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
        }
        
        .auth-button:hover {
            background: #0056b3;
        }
        
        .auth-button.logout {
            background: #dc3545;
        }
        
        .auth-button.logout:hover {
            background: #c82333;
        }
        
        /* No Results Message */
        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.2rem;
        }
        
        /* Loading Animation */
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
                .font-size-controls {
                display: flex;
                gap: 6px;
                align-items: center;
                }

        .font-control {
            background: #fff;
            border: 1px solid #ccc;
            color: #333;
            padding: 4px 10px;
            font-size: 15px;
            border-radius: 3px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .font-control:hover {
        background: #e9ecef;
        }

    </style>
</head>
<body>
    <!-- Navigation Header -->
    <header class="header">
        <div class="container">
            <div class="logo">ReBorn Fashion+</div>
            <nav class="nav-links">
                <a href="index.html">Home</a>
                <a href="about.html">About</a>
                <a href="shop.html" class="active">Shop <span id="cartCount" class="cart-count" style="display: none;">0</span></a>
                <a href="how-it-works.html">How It Works</a>
                <a href="reborn-biz.html">B2B</a>
                <a href="contact.html">Contact</a>
                <button id="authButton" class="auth-button">Login</button>
            </nav>
            <div class="font-size-controls" style="float: right; margin-left: 25px;">
              <button class="font-control" id="decrease-font">A-</button>
              <button class="font-control" id="reset-font">A</button>
              <button class="font-control" id="increase-font">A+</button>
            </div>

        </div>
    </header>

    <!-- Shop Section -->
    <section class="shop-section">
        <div class="container">
            <h1>Our Products</h1>
            
            <!-- Shop Controls -->
            <div class="shop-controls">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search products...">
                </div>
                <select id="categoryFilter" class="filter-dropdown">
                    <option value="">All Categories</option>
                    <option value="dresses">Dresses</option>
                    <option value="jackets">Jackets</option>
                    <option value="tops">Tops</option>
                    <option value="bottoms">Bottoms</option>
                    <option value="accessories">Accessories</option>
                </select>
                <div class="product-count">
                    <span id="productCount">0</span> products found
                </div>
            </div>
            
            <!-- Loading State -->
            <div id="loadingState" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Loading products...</p>
            </div>
            
            <!-- No Results -->
            <div id="noResults" class="no-results" style="display: none;">
                <p>No products found matching your criteria.</p>
                <p>Try adjusting your search or filter options.</p>
            </div>
            
            <!-- Product Grid -->
            <div id="productGrid" class="product-grid">
                <!-- Products will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms</a>
                <a href="#">Instagram</a>
                <a href="#">Facebook</a>
            </div>
            <p>¬© 2025 ReBorn Fashion+. All rights reserved.</p>
        </div>
    </footer>

    <script>
                    // Font Size Control Logic
            const minFontSize = 14; // px
            const maxFontSize = 22; // px
            const defaultFontSize = 16; // px

            function setFontSize(size) {
                document.documentElement.style.fontSize = size + 'px';
                localStorage.setItem('fontSize', size);
            }

            function getStoredFontSize() {
                return parseInt(localStorage.getItem('fontSize')) || defaultFontSize;
            }

            // When page loads, set font size
            document.addEventListener('DOMContentLoaded', function() {
                setFontSize(getStoredFontSize());

                document.getElementById('increase-font').onclick = function() {
                    let size = getStoredFontSize() + 2;
                    if (size > maxFontSize) size = maxFontSize;
                    setFontSize(size);
                };

                document.getElementById('decrease-font').onclick = function() {
                    let size = getStoredFontSize() - 2;
                    if (size < minFontSize) size = minFontSize;
                    setFontSize(size);
                };

                document.getElementById('reset-font').onclick = function() {
                    setFontSize(defaultFontSize);
                };
            });

        // Enhanced keyboard shortcuts for philosophy page
        document.addEventListener('keydown', (e) => {
            // Shift + R to navigate to philosophy page (works from any page)
            if (e.ctrlKey && e.key.toLowerCase() === 'e') {
                e.preventDefault();
                if (!window.location.pathname.includes('philosophy.html')) {
                    window.location.href = 'philosophy.html';
                } else {
                    // If already on philosophy page, show a notification
                    showNotification('Already on Philosophy page!', 'info');
                }
            }
            
            // Ctrl/Cmd + K to focus search (if search exists)
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                const searchInput = document.querySelector('input[type="search"], input[placeholder*="search"], #searchInput');
                if (searchInput) {
                    searchInput.focus();
                }
            }
            
            // Escape key to close any modals or overlays
            if (e.key === 'Escape') {
                const modals = document.querySelectorAll('.modal-overlay, .quick-view-container');
                modals.forEach(modal => {
                    if (modal.style.display === 'block' || modal.classList.contains('show')) {
                        modal.style.display = 'none';
                        modal.classList.remove('show');
                    }
                });
            }
        });
        // Product Data (JSON-style array)
        const products = [
            {
                id: 1,
                name: "ReBorn Dress",
                price: 4500.00,
                category: "dresses",
                image: "assets/Dre.jpg",
                description: "Elegant upcycled dress with unique design"
            },
            {
                id: 2,
                name: "ReBorn Jacket",
                price: 6500.00,
                category: "jackets",
                image: "assets/Set.jpg",
                description: "Stylish recycled jacket"
            },
            {
                id: 3,
                name: "ReBorn Shirt",
                price: 3500.00,
                category: "tops",
                image: "assets/Shr.jpg",
                description: "Comfortable upcycled cotton shirt"
            },
            {
                id: 4,
                name: "ReBorn Trousers",
                price: 5000.00,
                category: "bottoms",
                image: "assets/tru.jpg",
                description: "Classic recycled trousers"
            },
            {
                id: 5,
                name: "ReBorn Scarf",
                price: 2000.00,
                category: "accessories",
                image: "assets/sca.jpg",
                description: "Soft recycled fabric scarf"
            },
            {
                id: 6,
                name: "ReBorn Bag",
                price: 7500.00,
                category: "accessories",
                image: "assets/ba.jpg",
                description: "Elegant upcycled leather bag"
            }
        ];

        // Global variables
        let filteredProducts = [...products];
        let cart = JSON.parse(sessionStorage.getItem('cart') || '[]');

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            updateCartCount();
            loadProducts();
            setupEventListeners();
        });

        // Check authentication status
        function checkAuthStatus() {
            const isLoggedIn = sessionStorage.getItem('isLoggedIn');
            const authButton = document.getElementById('authButton');
            
            if (isLoggedIn === 'true') {
                const username = sessionStorage.getItem('username') || 'User';
                authButton.classList.add('logout');
                authButton.textContent = 'Logout';
                authButton.onclick = logout;
            } else {
                authButton.textContent = 'Login';
                authButton.classList.remove('logout');
                authButton.onclick = () => window.location.href = 'login.html';
            }
        }

        // Logout function
        function logout() {
            sessionStorage.clear();
            window.location.reload();
        }

        // Update cart count
        function updateCartCount() {
            const cartCount = document.getElementById('cartCount');
            
            if (cart.length > 0) {
                cartCount.textContent = cart.length;
                cartCount.style.display = 'inline-flex';
            } else {
                cartCount.style.display = 'none';
            }
        }

        // Load products with loading animation
        function loadProducts() {
            const loadingState = document.getElementById('loadingState');
            const productGrid = document.getElementById('productGrid');
            
            // Show loading
            loadingState.style.display = 'block';
            productGrid.style.display = 'none';
            
            // Simulate loading delay
            setTimeout(() => {
                displayProducts(filteredProducts);
                loadingState.style.display = 'none';
                productGrid.style.display = 'grid';
            }, 800);
        }

        // Display products
        function displayProducts(productsToShow) {
            const productGrid = document.getElementById('productGrid');
            const noResults = document.getElementById('noResults');
            const productCount = document.getElementById('productCount');
            
            productCount.textContent = productsToShow.length;
            
            if (productsToShow.length === 0) {
                productGrid.style.display = 'none';
                noResults.style.display = 'block';
                return;
            }
            
            noResults.style.display = 'none';
            productGrid.style.display = 'grid';
            
            productGrid.innerHTML = productsToShow.map(product => {
                const isInCart = cart.some(item => item.id === product.id);
                const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
                const isInWishlist = wishlist.some(item => item.id === product.id);
                
                return `
                    <div class="product-card" data-product-id="${product.id}">
                        <div class="product-image-container">
                            <img src="${product.image}" alt="${product.name}" onclick="showQuickView(${product.id})">
                            <div class="product-overlay">
                                <button class="quick-view-btn" onclick="showQuickView(${product.id})">Quick View</button>
                                <button class="wishlist-btn ${isInWishlist ? 'in-wishlist' : ''}" 
                                        onclick="toggleWishlist(${product.id})" 
                                        title="${isInWishlist ? 'Remove from Wishlist' : 'Add to Wishlist'}">
                                    ${isInWishlist ? '‚ù§Ô∏è' : 'ü§ç'}
                                </button>
                            </div>
                        </div>
                        <h3>${product.name}</h3>
                        <p class="product-price">Rs.${product.price.toFixed(2)}</p>
                        <p class="product-description">${product.description}</p>
                        <button class="card-button ${isInCart ? 'added' : ''}" 
                                onclick="addToCart(${product.id})"
                                data-product-id="${product.id}">
                            ${isInCart ? 'Added to Cart' : 'Add to Cart'}
                        </button>
                    </div>
                `;
            }).join('');
        }

        // Wishlist functionality
        function toggleWishlist(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            let wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
            const existingItem = wishlist.find(item => item.id === productId);
            
            if (existingItem) {
                // Remove from wishlist
                wishlist = wishlist.filter(item => item.id !== productId);
                showToast('Removed from wishlist', 'warning');
            } else {
                // Add to wishlist
                wishlist.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    description: product.description
                });
                showToast('Added to wishlist', 'success');
            }
            
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
            displayProducts(filteredProducts); // Refresh display
        }

        // Quick View Modal
        function showQuickView(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
            const isInWishlist = wishlist.some(item => item.id === productId);
            const isInCart = cart.some(item => item.id === productId);
            
            const modal = document.createElement('div');
            modal.className = 'modal-overlay show';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="quick-view-container">
                        <div class="quick-view-image">
                            <img src="${product.image}" alt="${product.name}">
                        </div>
                        <div class="quick-view-details">
                            <h2>${product.name}</h2>
                            <p class="price">Rs.${product.price.toFixed(2)}</p>
                            <p class="description">${product.description}</p>
                            <div class="product-actions">
                                <button class="wishlist-btn ${isInWishlist ? 'in-wishlist' : ''}" 
                                        onclick="toggleWishlist(${productId})">
                                    ${isInWishlist ? '‚ù§Ô∏è Remove from Wishlist' : 'ü§ç Add to Wishlist'}
                                </button>
                                <button class="card-button ${isInCart ? 'added' : ''}" 
                                        onclick="addToCart(${productId})">
                                    ${isInCart ? 'Added to Cart' : 'Add to Cart'}
                                </button>
                            </div>
                            <button class="close-btn" onclick="this.closest('.modal-overlay').remove()">√ó</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal on outside click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Toast notification system
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            // Show toast
            setTimeout(() => toast.classList.add('show'), 100);
            
            // Hide toast after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Enhanced Add to Cart with animation
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                // Remove from cart
                cart = cart.filter(item => item.id !== productId);
                sessionStorage.setItem('cart', JSON.stringify(cart));
                showToast('Removed from cart', 'warning');
                
                // Update button - find the button within the specific product card
                const productCard = document.querySelector(`[data-product-id="${productId}"]`);
                const button = productCard.querySelector('.card-button');
                button.textContent = 'Add to Cart';
                button.classList.remove('added');
            } else {
                // Add to cart with animation
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image
                });
                sessionStorage.setItem('cart', JSON.stringify(cart));
                showToast('Added to cart', 'success');
                
                // Update button with animation - find the button within the specific product card
                const productCard = document.querySelector(`[data-product-id="${productId}"]`);
                const button = productCard.querySelector('.card-button');
                button.textContent = 'Added to Cart';
                button.classList.add('added');
                
                // Add bounce animation
                button.style.animation = 'bounce 0.6s ease';
                setTimeout(() => {
                    button.style.animation = '';
                }, 600);
            }
            
            updateCartCount();
        }

        // Enhanced filter with debouncing
        let filterTimeout;
        function filterProducts() {
            clearTimeout(filterTimeout);
            filterTimeout = setTimeout(() => {
                const searchTerm = document.getElementById('searchInput').value.toLowerCase();
                const categoryFilter = document.getElementById('categoryFilter').value;
                
                filteredProducts = products.filter(product => {
                    const matchesSearch = product.name.toLowerCase().includes(searchTerm) ||
                                        product.description.toLowerCase().includes(searchTerm);
                    const matchesCategory = !categoryFilter || product.category === categoryFilter;
                    
                    return matchesSearch && matchesCategory;
                });
                
                loadProducts();
            }, 300); // Debounce for 300ms
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search input with debouncing
            document.getElementById('searchInput').addEventListener('input', filterProducts);
            
            // Category filter
            document.getElementById('categoryFilter').addEventListener('change', filterProducts);
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'k') {
                    e.preventDefault();
                    document.getElementById('searchInput').focus();
                }
            });
        }

        // Add smooth scrolling for all internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>